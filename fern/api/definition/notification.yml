# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  source: source.yml

types:
  WebhookNotification:
    properties:
      enabled:
        type: boolean
        docs: Enable or disable webhook notifications on the workspace
      source_id:
        type: source.SourceId
        docs: The Hookdeck Source to send the webhook to
      topics:
        type: list<Topic>
        docs: List of topics to send notifications for

  Topic:
    enum:
      - name: IssueOpened
        value: issue.opened
      - name: IssueUpdated
        value: issue.updated
    docs: Either issue.opened or issue.updated

services:
  http:
    NotificationService:
      docs: |
        Notifications let your team receive alerts anytime an issue changes.
      base-path: /notifications
      auth: true
      endpoints:
        toggleWebhookNotification:
          docs: This endpoint enables or disables webhook notifications for the workspace.
          method: PUT
          path: /webhooks
          request: WebhookNotification
          response: WebhookNotification
